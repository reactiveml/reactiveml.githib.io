\ProvidesPackage{rml}

\RequirePackage{listings}
\RequirePackage{xspace}

\newcommand{\langname}[1]{{{#1}}\xspace}

\newcommand{\ocaml}{\langname{OCaml}}
\newcommand{\rml}{\langname{ReactiveML}}
\newcommand{\esterel}{\langname{Esterel}}
\newcommand{\lucy}{\langname{Lucid Synchrone}}
\newcommand{\ulm}{\langname{ULM}}
\newcommand{\funloft}{\langname{FunLoft}}
\newcommand{\cml}{\langname{ConcurrentML}}
\newcommand\reactivec{\langname{ReactiveC}}

\newcommand\lwt{LWT\xspace}
\newcommand\conhaskell{\langname{Concurrent Haskell}}
\newcommand\fsharp{\langname{F\#}}

% Definition relatives aux listings

\lstdefinelanguage{rml}[]{}{
  morekeywords=[2]{fun,let,and,rec,in,type,mutable,await,immediate,process,signal,gather,default,event,match,with,of},
  morekeywords=[1]{end,where,loop,when,while,do,until,control,for,to,dopar,present,if,then,else,done},
  morekeywords=[3]{pause,emit,run,one,},
  morecomment={[s]{(*}{*)}},
  moredelim=[is][\itshape\small]{?}{?}
}


\lstdefinelanguage[par]{rml}[]{rml}{
  morekeywords=[2]{scheduler,all,last,spawn,runpar,newclock,at,memory,last,domain,machine,by,every},
  morekeywords=[1]{automaton,reset,every,continue},
  morekeywords=[3]{pauseclock}
}

\lstset{
basicstyle=\ttfamily,
keywordstyle= \ttfamily\bfseries\color{Blue},
commentstyle=\color{Brown},
stringstyle=\color{red},
keepspaces=true,%
aboveskip=0.3em,
mathescape=true, 
columns=fullflexible
}

\lstnewenvironment{rmlcl}[1][1]%
{\lstset{numbers=left,numberstyle=\tiny,numbersep=5pt,firstnumber=#1}}
{}

\lstMakeShortInline{`}

\lstset{language=rml}
