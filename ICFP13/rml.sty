\ProvidesPackage{rml}

\RequirePackage{listings}
\RequirePackage{xspace}

\newcommand{\ocaml}{\textsc{Ocaml}\xspace}
\newcommand{\rml}{\textsc{ReactiveML}\xspace}

\newenvironment{lstrmlpar}{\begin{lstlisting}[language={[par]rml}]}
  {\end{lstlisting}}

% Definition relatives aux listings

\lstdefinelanguage{rml}[]{}{
  morekeywords=[2]{fun,let,rec,in,type,mutable,await,immediate,process,signal,gather,default,event,clock,match,with,of},
  morekeywords=[1]{end,where,loop,when,while,do,until,control,for,to,dopar,present,if,then,else,done},
  morekeywords=[3]{pause,emit,run,one,},
  morecomment={[s]{(*}{*)}}
}


\lstdefinelanguage[par]{rml}[]{rml}{
  morekeywords=[2]{scheduler,all,last,spawn,runpar,newclock,at,memory,last,domain,machine,by,every},
  morekeywords=[1]{automaton,reset,every,continue},
  morekeywords=[3]{pauseclock}
}

\lstset{language=rml}
