<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.16 in css mode. -->
<html>
  <head>
    <title>area.rml</title>
    <style type="text/css">
    <!--
      body {
        color: #000000;
        background-color: #ffffff;
      }
      .constant {
        /* font-lock-constant-face */
        color: #5f9ea0;
      }
      .function-name {
        /* font-lock-function-name-face */
        color: #0000ff;
      }
      .type {
        /* font-lock-type-face */
        color: #228b22;
      }
      .variable-name {
        /* font-lock-variable-name-face */
        color: #b8860b;
      }
      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="variable-name">open</span> <span class="function-name">Global</span>
  
<span class="type">let</span> get_area posx posy = 
  posx / area_size_x, posy / area_size_y 
    
<span class="type">let</span> get_areas posx posy = 
  <span class="type">let</span> neighbor_areas = ref [] <span class="type">in</span>
  <span class="type">let</span> center_i = posx / area_size_x <span class="type">in</span>
  <span class="type">let</span> center_j = posy / area_size_y <span class="type">in</span>
  <span class="type">let</span> left = (posx - coverage_range) / area_size_x <span class="type">in</span>
  <span class="type">let</span> right = (posx + coverage_range) / area_size_x <span class="type">in</span>
  <span class="type">let</span> up = (posy + coverage_range) / area_size_y <span class="type">in</span>
  <span class="type">let</span> down = (posy - coverage_range) / area_size_y <span class="type">in</span>
  <span class="constant">for</span> i = left <span class="constant">to</span> right <span class="constant">do</span>
    <span class="constant">if</span> 0 &lt;= i <span class="constant">&amp;&amp;</span> i &lt; nb_area_x <span class="constant">then</span>
      <span class="constant">for</span> j = down <span class="constant">to</span> up <span class="constant">do</span>
        <span class="constant">if</span> 0 &lt;= j <span class="constant">&amp;&amp;</span> j &lt; nb_area_y <span class="constant">then</span>
          <span class="constant">if</span> not (i = center_i <span class="constant">&amp;&amp;</span> j = center_j) <span class="constant">then</span>
            neighbor_areas := (i,j) :: !neighbor_areas
      <span class="constant">done</span>
  <span class="constant">done</span>;
  (center_i, center_j), !neighbor_areas
    
<span class="type">let</span> <span class="type">process</span> make_areas =
  <span class="constant">for</span> i = 0 <span class="constant">to</span> nb_area_x-1 <span class="constant">do</span>
    <span class="constant">for</span> j = 0 <span class="constant">to</span> nb_area_y-1 <span class="constant">do</span>
      <span class="type">signal</span> msg_hello <span class="type">in</span>
      hello_array.(i).(j) &lt;- msg_hello
    <span class="constant">done</span>
  <span class="constant">done</span>
</pre>
  </body>
</html>
